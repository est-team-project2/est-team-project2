<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°•ì•„ì§€ ì¢…í•© ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
            padding: 20px;
        }
        
        .container {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 90%;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #ddd;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 1rem;
            color: #666;
        }
        
        .tab.active {
            color: #2196F3;
            border-bottom: 2px solid #2196F3;
            margin-bottom: -2px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        h1, h2 {
            text-align: center;
            color: #333;
            margin-bottom: 1.5rem;
        }

        h2 {
            font-size: 1.2rem;
            margin-top: 2rem;
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            color: #555;
        }
        
        input, select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            margin-bottom: 1rem;
        }
        
        .result {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #e8f5e9;
            border-radius: 4px;
            text-align: center;
        }
        
        .vaccination-schedule {
            margin-top: 1.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 1rem;
        }

        .vaccination-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem;
            border-bottom: 1px solid #eee;
        }

        .highlight {
            color: #2196F3;
            font-weight: bold;
        }

        .note {
            margin-top: 1rem;
            font-size: 0.85rem;
            color: #666;
            text-align: center;
        }

        .past-date { color: #4CAF50; }
        .future-date { color: #FF5722; }
        .today-date { color: #FFC107; }
        
        .btn {
            background-color: #2196F3;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .btn:hover {
            background-color: #1976D2;
        }

        .vaccine-next-date {
            background-color: #fff3e0;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ• ê°•ì•„ì§€ ì¢…í•© ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('age')">ë‚˜ì´ ê³„ì‚°</button>
            <button class="tab" onclick="showTab('schedule')">ì˜ˆë°©ì ‘ì¢… ì¼ì •</button>
            <button class="tab" onclick="showTab('next')">ë‹¤ìŒ ì ‘ì¢…ì¼ ê³„ì‚°</button>
        </div>

        <div id="age" class="tab-content active">
            <div class="input-group">
                <label for="birthDate">ê°•ì•„ì§€ ìƒë…„ì›”ì¼</label>
                <input type="date" id="birthDate" onchange="calculateAll()">
            </div>
            <div id="result" class="result">
                <p>í˜„ì¬ <span id="actualAge" class="highlight">0ë…„ 0ê°œì›”</span> ë˜ì—ˆìŠµë‹ˆë‹¤</p>
                <p>ì‚¬ëŒ ë‚˜ì´ë¡œ <span id="humanAge" class="highlight">0</span>ì‚´ ì…ë‹ˆë‹¤</p>
            </div>
            <p class="note">* ë‚˜ì´ ê³„ì‚° ë°©ì‹: ì²«í•´ 15ì‚´, ë‘ë²ˆì§¸ í•´ +9ì‚´, ì´í›„ ë§¤ë…„ +4ì‚´</p>
        </div>

        <div id="schedule" class="tab-content">
            <div class="vaccination-schedule" id="vaccinationSchedule">
                <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì±„ì›Œì§ˆ ì˜ˆì • -->
            </div>
            <p class="note">* ìœ„ ì ‘ì¢… ì¼ì •ì€ í‘œì¤€ ì¼ì •ì´ë©°, ì‹¤ì œ ì ‘ì¢…ì€ ìˆ˜ì˜ì‚¬ì™€ ìƒë‹´ í›„ ê²°ì •í•˜ì„¸ìš”.</p>
        </div>

        <div id="next" class="tab-content">
            <div class="input-group">
                <label for="vaccineType">ì˜ˆë°©ì ‘ì¢… ì¢…ë¥˜</label>
                <select id="vaccineType" onchange="calculateNextVaccination()">
                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="dhppl">ì¢…í•©ë°±ì‹  (DHPPL)</option>
                    <option value="corona">ì½”ë¡œë‚˜</option>
                    <option value="rabies">ê´‘ê²¬ë³‘</option>
                    <option value="kennel">ì¼„ë„¬ì½”í”„</option>
                </select>

                <label for="lastVaccinationDate">ë§ˆì§€ë§‰ ì ‘ì¢…ì¼</label>
                <input type="date" id="lastVaccinationDate" onchange="calculateNextVaccination()">

                <div id="nextVaccinationResult" class="vaccine-next-date">
                    ë‹¤ìŒ ì ‘ì¢…ì¼ì„ í™•ì¸í•˜ë ¤ë©´ ìœ„ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
                </div>
            </div>
        </div>
    </div>

    <script>
        // íƒ­ ì „í™˜ í•¨ìˆ˜
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`button[onclick="showTab('${tabId}')"]`).classList.add('active');
            
            if (tabId === 'schedule' && document.getElementById('birthDate').value) {
                calculateVaccinations();
            }
        }

        function calculateAll() {
            calculateAge();
            calculateVaccinations();
        }

        function calculateAge() {
            const birthDateInput = document.getElementById('birthDate');
            const actualAgeSpan = document.getElementById('actualAge');
            const humanAgeSpan = document.getElementById('humanAge');
            
            const birthDate = new Date(birthDateInput.value);
            const today = new Date();
            
            if (birthDate > today) {
                alert('ìƒë…„ì›”ì¼ì´ í˜„ì¬ë³´ë‹¤ ë¯¸ë˜ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            let years = today.getFullYear() - birthDate.getFullYear();
            let months = today.getMonth() - birthDate.getMonth();
            
            if (months < 0 || (months === 0 && today.getDate() < birthDate.getDate())) {
                years--;
                months = months + 12;
            }
            
            if (today.getDate() < birthDate.getDate()) {
                months--;
            }
            
            if (months < 0) {
                months = 11;
            }
            
            const dogAge = years + (months / 12);
            
            let humanAge;
            if (dogAge <= 1) {
                humanAge = 15 * dogAge;
            } else if (dogAge <= 2) {
                humanAge = 15 + (dogAge - 1) * 9;
            } else {
                humanAge = 24 + (dogAge - 2) * 4;
            }
            
            actualAgeSpan.textContent = `${years}ë…„ ${months}ê°œì›”`;
            humanAgeSpan.textContent = Math.round(humanAge);
        }

        function calculateVaccinations() {
            const birthDate = new Date(document.getElementById('birthDate').value);
            const today = new Date();
            const schedule = [
                { weeks: 6, name: "DHPPL 1ì°¨" },
                { weeks: 9, name: "DHPPL 2ì°¨" },
                { weeks: 12, name: "DHPPL 3ì°¨" },
                { weeks: 16, name: "DHPPL 4ì°¨" },
                { weeks: 8, name: "ì½”ë¡œë‚˜ 1ì°¨" },
                { weeks: 11, name: "ì½”ë¡œë‚˜ 2ì°¨" },
                { weeks: 12, name: "ê´‘ê²¬ë³‘ 1ì°¨" },
                { weeks: 52, name: "1ë…„ì°¨ ì¶”ê°€ì ‘ì¢… (ì¢…í•©)" }
            ];

            const scheduleHtml = schedule.map(item => {
                const vaccinationDate = new Date(birthDate);
                vaccinationDate.setDate(vaccinationDate.getDate() + (item.weeks * 7));
                
                const dateString = vaccinationDate.toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                let dateClass = '';
                if (vaccinationDate < today) {
                    dateClass = 'past-date';
                } else if (vaccinationDate > today) {
                    dateClass = 'future-date';
                } else {
                    dateClass = 'today-date';
                }

                return `
                    <div class="vaccination-item">
                        <span>${item.name}</span>
                        <span class="${dateClass}">${dateString}</span>
                    </div>
                `;
            }).join('');

            document.getElementById('vaccinationSchedule').innerHTML = scheduleHtml;
        }

        function calculateNextVaccination() {
            const vaccineType = document.getElementById('vaccineType').value;
            const lastDate = new Date(document.getElementById('lastVaccinationDate').value);
            const today = new Date();
            
            if (!vaccineType || !document.getElementById('lastVaccinationDate').value) {
                document.getElementById('nextVaccinationResult').innerHTML = 
                    'ì˜ˆë°©ì ‘ì¢… ì¢…ë¥˜ì™€ ë§ˆì§€ë§‰ ì ‘ì¢…ì¼ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                return;
            }

            if (lastDate > today) {
                document.getElementById('nextVaccinationResult').innerHTML = 
                    'ë§ˆì§€ë§‰ ì ‘ì¢…ì¼ì´ í˜„ì¬ë³´ë‹¤ ë¯¸ë˜ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
                return;
            }

            const vaccineIntervals = {
                dhppl: {
                    interval: 365,
                    name: 'ì¢…í•©ë°±ì‹  (DHPPL)',
                    description: 'ë§¤ë…„ 1íšŒ ì ‘ì¢…ì´ í•„ìš”í•©ë‹ˆë‹¤.'
                },
                corona: {
                    interval: 365,
                    name: 'ì½”ë¡œë‚˜',
                    description: 'ë§¤ë…„ 1íšŒ ì ‘ì¢…ì´ í•„ìš”í•©ë‹ˆë‹¤.'
                },
                rabies: {
                    interval: 365,
                    name: 'ê´‘ê²¬ë³‘',
                    description: 'ë§¤ë…„ 1íšŒ ì ‘ì¢…ì´ í•„ìš”í•©ë‹ˆë‹¤.'
                },
                kennel: {
                    interval: 180,
                    name: 'ì¼„ë„¬ì½”í”„',
                    description: '6ê°œì›”ë§ˆë‹¤ ì ‘ì¢…ì´ í•„ìš”í•©ë‹ˆë‹¤.'
                }
            };

            const vaccine = vaccineIntervals[vaccineType];
            const nextDate = new Date(lastDate);
            nextDate.setDate(lastDate.getDate() + vaccine.interval);

            const nextDateString = nextDate.toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            let dateClass = '';
            if (nextDate < today) {
                dateClass = 'past-date';
            } else if (nextDate > today) {
                dateClass = 'future-date';
            } else {
                dateClass = 'today-date';
            }

            document.getElementById('nextVaccinationResult').innerHTML = `
                <p><strong>${vaccine.name}</strong></p>
                <p>ë‹¤ìŒ ì ‘ì¢… ì˜ˆì •ì¼: <span class="${dateClass}">${nextDateString}</span></p>
                <p>${vaccine.description}</p>
                ${nextDate < today ? '<p style="color: #FF5722">âš ï¸ ì ‘ì¢… ì˜ˆì •ì¼ì´ ì§€ë‚¬ìŠµë‹ˆë‹¤. ìˆ˜ì˜ì‚¬ì™€ ìƒë‹´í•´ì£¼ì„¸ìš”.</p>' : ''}
            `;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì˜¤ëŠ˜ ë‚ ì§œ ì´í›„ë¡œëŠ” ì„ íƒí•  ìˆ˜ ì—†ë„ë¡ ì„¤ì •
        window.onload = function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('birthDate').max = today;
            document.getElementById('lastVaccinationDate').max = today;
        }
    </script>
</body>
</html>